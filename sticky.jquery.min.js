(function($){$.fn.sticky=function(){return this.each(function(){var $el=$(this);var elWidth=$el.width();var elHeight=$el.height();var thHeight=$el.find("th:first").parent().height();var thWidthsArr=[];$el.find("th").each(function(){thWidthsArr.push($(this).css("width"))});var pos=$el.offset();var thTop=pos.top+"px";var thLeft=pos.left;var firstRow="tr:first-child";var hasTHead=$el.find("thead").length;if(hasTHead)firstRow="thead tr:first-child";var count=0;$el.find(firstRow+">th").each(function(){$(this).css("width",thWidthsArr[count]);count++});count=0;var lastRow="tr:last-child";$el.find(lastRow+">td").each(function(){$(this).css("width",thWidthsArr[count]);count++});$(window).scroll(function(){if($(window).scrollTop()>pos.top&&$(window).scrollTop()<pos.top+elHeight-thHeight){$el.find(firstRow).css("width",elWidth+"px");$el.find(lastRow).css("width",elWidth+"px");$el.find(firstRow).css("position","absolute");$el.find(firstRow).css("top",$("body")[0].scrollTop+"px");$el.find(firstRow).css("left",thLeft+"px")}else{$el.find(firstRow).css("position","relative");$el.find(firstRow).css("top",thTop)}})})}})(jQuery);